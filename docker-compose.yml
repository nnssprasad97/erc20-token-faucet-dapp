version: '3.8'

services:
  backend:
    build: .
    ports:
      - "8545:8545"
    command: sh -c "npx hardhat node & sleep 5 && npx hardhat run scripts/deploy.js --network localhost && wait"
    networks:
      - app_network

  frontend:
    image: node:18-alpine
    working_dir: /app
    volumes:
      - ./src:/app/src
      - ./public:/app/public # Assuming simple static file or similar
    command: echo "Frontend placeholder - User needs to provide frontend code structure in src/" && tail -f /dev/null
    networks:
      - app_network
    ports:
      - "3000:3000"

networks:
  app_network:
    driver: bridge
